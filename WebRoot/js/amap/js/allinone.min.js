function Amap(b,a,d,e,f,c){this.map=new AMap.Map(b,$.extend({rotateEnable:false,dragEnable:true,zoomEnable:true,zooms:[7,18],doubleClickZoom:true,jogEnable:true,scrollWheel:true,view:new AMap.View2D({center:this.getLnglat(a,d),zoom:e})},c?c:{}));this.app=f;this.initEventType();}Amap.prototype.addToolBar=function(){var a=this;this.map.plugin(["AMap.ToolBar"],function(){a.toolBar=new AMap.ToolBar();a.map.addControl(a.toolBar);});};Amap.prototype.addOverView=function(){var a=this;this.map.plugin(["AMap.OverView"],function(){a.overView=new AMap.OverView({visible:true});a.map.addControl(a.overView);a.overView.open();});};Amap.prototype.addScale=function(){var a=this;this.map.plugin(["AMap.Scale"],function(){a.scale=new AMap.Scale();a.map.addControl(a.scale);});};Amap.prototype.initInfoWindow=function(a){this.infoWindow=new AMap.InfoWindow($.extend({isCustom:true,offset:new AMap.Pixel(16,-30)},a?a:{}));};Amap.prototype.initEventType=function(){this.eventType={marker:["click","dblclick","rightclick","mousemove","mouseover","mouseout","dragstart","dragging","dragend"],polyline:["click","dblclick","rightclick","hide","mouseover","mouseout","zoomchange"],polygon:["click","dblclick","rightclick","hide","mouseover","mouseout","zoomchange"]};};Amap.prototype.getLnglat=function(a,b){return new AMap.LngLat(a,b);};Amap.prototype.getLnglatArr=function(c,f){var d,b,e,a;if(c.lastIndexOf(f)==c.length-1){c=c.substring(0,c.lastIndexOf(f));}d=[];b=c.split(f);for(e=0;e<b.length;e++){a=b[e].split(",");d.push(this.getLnglat(a[0],a[1]));}return d;};Amap.prototype.distanceToPix=function(c){var b,a;b=this.map.getResolution();a=c/b;return a;};Amap.prototype.addMarker=function(i,g,e,d,a){var b,f,c,h;b=this.getLnglat(g,e);f=$.extend({map:this.map,title:i,position:b,offset:new AMap.Pixel(-10,-34),icon:this.app+"/js/amap/images/0.png",content:"",draggable:false,topWhenMouseOver:true},d?d:{});c=new AMap.Marker(f);h=$.extend({events:{click:{listener:null,handler:null,instance:null}},data:null,overlayType:"marker"},a?a:{});c.setExtData(h);this.addListeners(c,c);return c;};Amap.prototype.addPolyline=function(a,e,f){var d,c,b;d=$.extend({map:this.map,path:a,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:1,strokeStyle:"dashed",strokeDasharray:[10,5]},e?e:{});c=new AMap.Polyline(d);b=$.extend({events:{click:{listener:null,handler:null,instance:null}},data:null,overlayType:"polyline"},f?f:{});c.setExtData(b);this.addListeners(c,c);return c;};Amap.prototype.addPolygon=function(a,e,f){var c,d,b;c=$.extend({map:this.map,path:a,strokeColor:"#FF33FF",strokeOpacity:1,strokeWeight:2},e?e:{});d=new AMap.Polygon(c);b=$.extend({events:{click:{listener:null,handler:null,instance:null}},data:null,overlayType:"polygon"},f?f:{});d.setExtData(b);this.addListeners(d,d);return d;};Amap.prototype.createInfoWindow=function(i,g){$("div[class='info']").remove();var d=this.infoWindow;var c=document.createElement("div");c.className="info";var h=document.createElement("div");h.className="info-top";var f=document.createElement("div");f.innerHTML=i;var b=document.createElement("img");b.src=this.app+"/js/amap/images/close2.gif";b.onclick=function(){d.close();};h.appendChild(f);h.appendChild(b);c.appendChild(h);var j=document.createElement("div");j.className="info-middle";j.style.backgroundColor="white";j.innerHTML=g;c.appendChild(j);var a=document.createElement("div");a.className="info-bottom";a.style.position="relative";a.style.top="0px";a.style.margin="0 auto";var e=document.createElement("img");e.src=this.app+"/js/amap/images/sharp.png";a.appendChild(e);c.appendChild(a);return c;};Amap.prototype.openInfoWindow=function(a,c,b){this.infoWindow.setContent(this.createInfoWindow(c,b));this.infoWindow.open(this.map,a);};Amap.prototype.closeInfoWindow=function(){this.map.clearInfoWindow();};Amap.prototype.addListeners=function(a,c){var b=c.getExtData();var j=b.events;var d=b.overlayType;var g=this.eventType[d];for(var e=0;e<g.length;e++){var f=g[e];if(j[f]){if(j[f].handler){var h=j[f].instance?j[f].instance:c;this.addListener(h,f,j[f].handler,a,c);}}}};Amap.prototype.addListener=function(a,c,f,e,d){var b=AMap.event.addListener(a,c,f,e);d.getExtData().events[c].listener=b;};Amap.prototype.clearMap=function(e){for(var c=0;c<e.length;c++){var d=e[c];if(d==undefined){continue;}if(d.getExtData()){if(d.getExtData().events){var b=d.getExtData().events;for(var a in b){AMap.event.removeListener(b[a].listener);}}}d.setMap(null);}e.length=0;};